services:
  bw-export:
    container_name: bw-export
    tty: true
    image: bw-export
    build:
      context: .
      dockerfile: ./Dockerfile
    volumes:
      - D:\_ROOT\repos_my_devops\Bitwarden_Export\export:/var
    environment:
      - BW_CLIENTID=/run/secrets/bwclientid
      - BW_CLIENTSECRET=/run/secrets/bwsecret 
      - BW_PASSWORD=/run/secrets/bwpassword
      - EXPORT_PASSWORD=/run/secrets/exportpassword
      # Optional: Own Vaultwarden/Bitarden selfhosted server
      #- BW_URL_SERVER=<YOUR VAULTWARDER URL SERVER>
      - OUTPUT_PATH=/var/data/
      - ATTACHMENTS_PATH=/var/attachment/  
      - BW_ORGANIZATIONS_LIST=7fa4314a-7138-4b25-9490-fdea3928a8c2,81e08799-110a-4c60-bb07-2e86f675761f
    secrets:
      - bwclientid
      - bwsecret
      - bwpassword

secrets:
  bwclientid:
    file: /mnt/c/.secrets/.bwclientid
  bwsecret:
    file: /mnt/c/.secrets/.bwsecret
  bwpassword:
    file: /mnt/c/.secrets/.bwpassword
  exportpassword:
    file: /mnt/c/.secrets/.exportpassword    